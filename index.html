<!doctype html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Interactive Financial Report — Atlas (Final)</title>

  <!-- Chart.js -->
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <!-- Styles -->
  <link rel="stylesheet" href="css/styles.css">
</head>
<body>
  <!-- ====== SPLASH SCREEN (Creative) ====== -->
  <div id="splash" class="splash" role="status" aria-live="polite">
    <div class="splash-canvas" aria-hidden="true"></div>

    <div class="splash-inner" role="img" aria-label="Atlas splash">
      <!-- SVG animated logo -->
      <div class="splash-logo" aria-hidden="false">
        <svg class="logo-svg" viewBox="0 0 200 200" width="120" height="120" aria-hidden="false">
          <defs>
            <linearGradient id="g1" x1="0%" x2="100%">
              <stop offset="0%" stop-color="#ffdca6"/>
              <stop offset="100%" stop-color="#cfe8ff"/>
            </linearGradient>
            <filter id="glow">
              <feGaussianBlur stdDeviation="6" result="coloredBlur"/>
              <feMerge>
                <feMergeNode in="coloredBlur"/>
                <feMergeNode in="SourceGraphic"/>
              </feMerge>
            </filter>
          </defs>

          <circle cx="100" cy="100" r="64" stroke="url(#g1)" stroke-width="6" fill="none"
                  stroke-linecap="round" class="ring"/>
          <g class="orbits">
            <circle class="dot dot1" r="4" cx="164" cy="100" fill="#fff"/>
            <circle class="dot dot2" r="3.2" cx="36" cy="100" fill="#ffdca6"/>
            <circle class="dot dot3" r="2.8" cx="100" cy="36" fill="#cfe8ff"/>
          </g>

          <g transform="translate(0,4)">
            <path class="letterA" d="M60 140 L95 40 L130 140 L115 140 L100 100 L85 140 Z" fill="#06344f"/>
            <rect x="92" y="85" width="16" height="8" rx="3" fill="#ffdca6" />
          </g>
        </svg>
      </div>

      <!-- title + animated tagline -->
      <div class="splash-text">
        <div class="splash-title">Atlas</div>
        <div class="splash-tagline"><span id="taglineTxt"></span><span class="cursor">|</span></div>
      </div>

      <!-- circular progress -->
      <div class="splash-progress-wrap" aria-hidden="true">
        <svg class="progress-svg" viewBox="0 0 36 36">
          <path class="progress-bg" d="M18 2 a 16 16 0 1 1 0 32 a 16 16 0 1 1 0 -32" />
          <path class="progress-bar" stroke-dasharray="0,100" d="M18 2 a 16 16 0 1 1 0 32 a 16 16 0 1 1 0 -32" />
        </svg>
      </div>

      <div class="splash-hint muted">جارِ تحميل البيانات…</div>
    </div>
  </div>

  <!-- Topbar for mobile -->
  <div class="topbar-mobile" aria-hidden="false">
    <div style="display:flex;gap:8px;align-items:center;width:100%">
      <button id="mobileHamburger" class="mobile-hamburger" aria-label="قائمة الشيتات">☰</button>
      <select id="mobileSheetSelect" class="mobile-sheet-select" aria-label="اختر الشيت"></select>
    </div>
    <div style="display:flex;gap:8px;align-items:center">
      <button id="mobileToggleDetail" class="btn">تفاصيل</button>
    </div>
  </div>

  <div class="app">
    <aside class="sidebar" id="sidebar" aria-label="القائمة الرئيسية">
      <div class="logo">Atlas — Sheets</div>
      <div class="subtext">اضغط على أي شيت لعرض بياناته</div>
      <div class="filter">
        <input class="search" id="searchInput" placeholder="ابحث عن شيت..." />
        <button class="btn" id="toggleSample">تبديل</button>
      </div>
      <ul class="menu" id="menuList" role="listbox" aria-label="قائمة الشيتات"></ul>
    </aside>

    <main class="main" role="main">
      <div class="header">
        <div>
          <div class="title" id="mainTitle">Loading...</div>
          <div class="muted small" id="subtitle">Atlas — Excel sheet viewer</div>
        </div>
        <div class="periods" id="periods"></div>
      </div>

      <div class="table-wrap" role="region" aria-label="جدول مالي">
        <table class="finance" id="financeTable" aria-live="polite">
          <thead id="tableHead"></thead>
          <tbody id="tableBody"></tbody>
        </table>
      </div>
    </main>
  </div>

  <aside class="detail-panel" id="detailPanel" aria-hidden="true">
    <div class="detail-head">
      <h3 id="detailTitle">تفاصيل</h3>
      <div style="display:flex;gap:8px;align-items:center">
        <div class="export">
          <button class="btn" id="exportCsv">Export CSV</button>
        </div>
        <button class="btn close" id="closePanel">إغلاق</button>
      </div>
    </div>
    <div class="detail-grid" id="detailGrid">
      <div class="card" id="summaryCard">
        <div class="muted">ملخّص القيمة</div>
        <div class="kv"><div id="p0name">P1</div><div id="val0">-</div></div>
        <div class="kv"><div id="p1name">P2</div><div id="val1">-</div></div>
        <div class="kv"><div id="p2name">P3</div><div id="val2">-</div></div>
        <div class="kv"><div id="p3name">P4</div><div id="val3">-</div></div>
      </div>
      <div class="card">
        <div class="muted">ملاحظات</div>
        <div id="noteArea" style="margin-top:8px;color:#123">—</div>
      </div>
      <div class="card">
        <div class="muted">رسم بياني</div>
        <div class="chart-wrap"><canvas id="miniChart"></canvas></div>
      </div>
      <div class="card accordion">
        <div class="acc-head" id="accHead">
          <div class="small">تفاصيل إضافية</div>
          <div class="small muted" id="accToggle">عرض</div>
        </div>
        <div class="acc-body" id="accBody">
          <div id="extraDetails">
            <div class="small">Breakdown: <b id="breakdown">—</b></div>
            <div style="height:10px"></div>
            <div class="small">تغيّر سنوي: <b id="delta">—</b></div>
            <div style="height:8px"></div>
            <div class="small">ملاحظات تفصيلية: <span id="detailedNote">—</span></div>
          </div>
        </div>
      </div>
    </div>
  </aside>

  <!-- Scripts -->
  <script src="js/data.js"></script>
  <script src="js/app.js"></script>
  <!-- splash must run last (it will call initApp when done) -->
  <script src="js/splash.js"></script>
</body>
</html>
